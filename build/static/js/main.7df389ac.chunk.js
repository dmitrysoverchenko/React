(this["webpackJsonpreact-start"]=this["webpackJsonpreact-start"]||[]).push([[0],{40:function(t,e,r){},50:function(t,e,r){},51:function(t,e,r){},52:function(t,e,r){},54:function(t,e,r){},75:function(t,e,r){},76:function(t,e,r){},77:function(t,e,r){"use strict";r.r(e);var a={};r.r(a),r.d(a,"star",(function(){return j}));var c=r(0),n=r.n(c),o=r(15),i=r.n(o),s=r(11),l=(r(40),r(1)),d=function(){return Object(l.jsx)("header",{children:Object(l.jsx)("nav",{children:Object(l.jsxs)("div",{className:"nav-wrapper",children:[Object(l.jsx)(s.b,{className:["navbar__link logo"],to:"/",children:"..."}),Object(l.jsxs)("ul",{className:"navbar",children:[Object(l.jsx)("li",{className:"navbar__item",children:Object(l.jsx)(s.b,{className:"navbar__link",to:"/cart",children:"Cart"})}),Object(l.jsx)("li",{className:"navbar__item",children:Object(l.jsx)(s.b,{className:"navbar__link",to:"/favorite",children:"Favorite"})})]})]})})})},u=(r(50),r(3)),j=(r(51),function(t){var e=t.color,r=void 0===e?"#2a88e0":e,a=t.filled,c=void 0!==a&&a;return Object(l.jsx)("svg",{viewBox:"0 0 16 17",xmlns:"http://www.w3.org/2000/svg",fill:"none",children:Object(l.jsx)("path",{d:"M14.1891 6.37042L10.2219 5.79385L8.44847 2.19854C8.40003 2.1001 8.32034 2.02042 8.2219 1.97198C7.97503 1.8501 7.67503 1.95167 7.55159 2.19854L5.77815 5.79385L1.81097 6.37042C1.70159 6.38604 1.60159 6.4376 1.52503 6.51573C1.43247 6.61086 1.38146 6.73885 1.38322 6.87157C1.38498 7.0043 1.43936 7.13089 1.5344 7.22354L4.40472 10.022L3.72659 13.9735C3.71069 14.0655 3.72086 14.16 3.75595 14.2464C3.79105 14.3329 3.84966 14.4077 3.92514 14.4626C4.00062 14.5174 4.08995 14.55 4.183 14.5566C4.27605 14.5632 4.3691 14.5437 4.45159 14.5001L8.00003 12.6345L11.5485 14.5001C11.6453 14.5517 11.7578 14.5689 11.8657 14.5501C12.1375 14.5032 12.3203 14.2454 12.2735 13.9735L11.5953 10.022L14.4657 7.22354C14.5438 7.14698 14.5953 7.04698 14.611 6.9376C14.6532 6.66417 14.4625 6.41104 14.1891 6.37042Z",stroke:r,fill:c?r:"none"})})}),O=(r(52),r(4)),b=r(35),f={CLEAR_CART:"CLEAR_CART",SET_CART:"SET_CART",SET_CARDS:"SET_CARDS",SET_FAVORITE:"SET_FAVORITE",SET_LOADER:"SET_LOADER",SET_MODAL:"SET_MODAL",REMOVE_FROM_CART:"REMOVE_FROM_CART",ADD_TO_CART:"ADD_TO_CART",CLOSE_MODAL:"CLOSE_MODAL"},h=function(t){return JSON.parse(localStorage.getItem(t))},p=function(t,e){return localStorage.setItem(t,JSON.stringify(e))},m=function(t){return{type:f.SET_MODAL,payload:t}},v={clearCart:function(){return{type:f.CLEAR_CART,payload:[]}},saveCards:function(t){return{type:f.SET_CARDS,payload:t}},setLoader:function(t){return{type:f.SET_LOADER,payload:t}},setFavorite:function(t){return function(e,r){var a=r().favorite.favorite,c=a.find((function(e){return+e.id===+t.id}))?a.filter((function(e){return e.id!==t.id})):[].concat(Object(b.a)(a),[t]);p("favorite",c),e({type:f.SET_FAVORITE,payload:c})}},setModal:m,addItemToCart:function(t){return function(e){e(m({isOpen:!0,header:"Do you want to add ot to the cart?"})),e({type:f.ADD_TO_CART,payload:t})}},setCartFromLocalStorage:function(){return function(t){t(m({isOpen:!1,header:null})),t({type:f.SET_CART,payload:h("cart")||[]})}},removeItemFromCart:function(t){return function(e){e(m({isOpen:!0,header:"Are you sure you want to delete it?"})),e({type:f.REMOVE_FROM_CART,payload:t})}},closeModal:function(t){return function(e,r){var a=r().cart.cart;t?(p("cart",a),e(v.setModal({isOpen:!1,header:null}))):e(v.setCartFromLocalStorage())}}},x=v,C=function(t){var e=t.type,r=t.color,c=t.filled,n=t.className,o=t.card,i=a[e],s=Object(O.b)();return Object(l.jsx)(l.Fragment,{children:i&&Object(l.jsx)("div",{className:"icon icon--".concat(e," ").concat(n),onClick:function(){return s(x.setFavorite(o))},children:i({color:r,filled:c})})})};C.defaultProps={type:"star",filled:!1};var _=C,T=function(t){var e=t.card,r=t.buyCan,a=t.trashCan,c=e.title,n=e.price,o=e.color,i=e.imgUrl,s=e.id,d=Object(O.c)((function(t){return t.favorite})).favorite,u=Object(O.c)((function(t){return t.cart})).cart,j=Object(O.b)();return Object(l.jsxs)("li",{className:"card",children:[Object(l.jsx)("h3",{className:"card__title",children:c}),Object(l.jsx)("img",{src:i,className:"card__image",alt:c,width:200,height:240}),Object(l.jsxs)("ul",{className:"card__characters",children:[Object(l.jsxs)("li",{children:["id: ",s]}),Object(l.jsxs)("li",{children:["color: ",o]}),Object(l.jsxs)("li",{children:["price: ",n]})]}),r&&Object(l.jsx)("button",{className:"card__button","data-add":!0,onClick:function(t){u.find((function(t){return t.id===s}))||j(x.addItemToCart(e))},children:"Add to cart"}),Object(l.jsx)(_,{filled:d.map((function(t){return t.id})).includes(s),className:"favorite",card:e}),a&&Object(l.jsx)("button",{className:"card__button",onClick:function(){return j(x.removeItemFromCart(e))},children:"Delete from cart"})]})};T.defaultProp={trashCan:!1};var A=T,E=(r(54),r(20)),y=r.n(E),R=r(31),g=r(32),S=r.n(g),L={fetchCards:function(){return function(){var t=Object(R.a)(y.a.mark((function t(e){var r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.get("/api/phones.json");case 2:r=t.sent,e(x.saveCards(r.data)),e(x.setLoader(!1)),p("cards",r.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},N=L,D=function(){var t=Object(O.b)(),e=Object(O.c)((function(t){return t.app})).cards;return Object(c.useEffect)((function(){0===e.length?t(N.fetchCards()):t(x.setLoader(!1))}),[e,t]),Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("ul",{className:"cards-container",children:e.map((function(t){return Object(l.jsx)(A,{card:t,buyCan:!0},t.id)}))})})},F=function(t){var e=t.text;return Object(l.jsx)("h3",{children:e})},M=function(){var t=Object(O.c)((function(t){return t.favorite})).favorite;return Object(l.jsx)(l.Fragment,{children:t.length?Object(l.jsx)("ul",{className:"cards-container",children:t.map((function(t){return Object(l.jsx)(A,{card:t},t.id)}))}):Object(l.jsx)(F,{text:"Your favorites list is empty"})})},k=function(){var t=Object(O.c)((function(t){return t.cart})).cart;return Object(l.jsx)(l.Fragment,{children:t.length?Object(l.jsx)("ul",{className:"cards-container",children:t.map((function(t){return Object(l.jsx)(A,{card:t,trashCan:!0,buyCan:!1},t.id)}))}):Object(l.jsx)(F,{text:"Your cart is empty"})})},w=function(){return Object(l.jsxs)(u.c,{children:[Object(l.jsx)(u.a,{exact:!0,path:"/",children:Object(l.jsx)(D,{})}),Object(l.jsx)(u.a,{path:"/favorite",children:Object(l.jsx)(M,{})}),Object(l.jsx)(u.a,{path:"/cart",children:Object(l.jsx)(k,{})})]})},I=(r(75),r(76),function(t){var e=t.text,r=t.backgroundColor,a=t.confirm,c=Object(O.b)();return Object(l.jsx)("button",{style:{backgroundColor:r},onClick:function(){return c(x.closeModal(a))},className:"button","data-testid":"buttonTest",children:e})});I.defaultProp={cancel:!1};var V=I,J=function(t){var e=t.header,r=Object(O.b)();return Object(l.jsx)("div",{className:"substrate",onClick:function(){return r(x.setCartFromLocalStorage())},children:Object(l.jsxs)("div",{className:"wrapper","data-testid":"modal-wrapper",onClick:function(t){return t.preventDefault()},children:[Object(l.jsxs)("header",{className:"header",children:[Object(l.jsx)("h2",{className:"title",children:e}),Object(l.jsx)("button",{className:"close-button",onClick:function(){return r(x.setCartFromLocalStorage())},children:"X"})]}),Object(l.jsxs)("div",{className:"action-wrapper",children:[Object(l.jsx)(V,{backgroundColor:"#2a88e0",text:"Ok",confirm:!0}),Object(l.jsx)(V,{backgroundColor:"#2a88e0",text:"Cancel"})]})]})})},P=function(){var t=Object(O.c)((function(t){return t.app.modal})),e=t.isOpen,r=t.header;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(d,{}),Object(l.jsx)("main",{className:"main",children:Object(l.jsx)(w,{})}),e&&Object(l.jsx)(J,{header:r})]})},B=r(13),Y=r(33),U=r(34),W=r(5),X={favorite:h("favorite")||[]},Z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,e=arguments.length>1?arguments[1]:void 0;return e.type===f.SET_FAVORITE?Object(W.a)(Object(W.a)({},t),{},{favorite:e.payload}):t},q={cart:h("cart")||[]},z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case f.SET_CART:case f.CLEAR_CART:return Object(W.a)(Object(W.a)({},t),{},{cart:e.payload});case f.ADD_TO_CART:return Object(W.a)(Object(W.a)({},t),{},{cart:t.cart.concat(e.payload)});case f.REMOVE_FROM_CART:return Object(W.a)(Object(W.a)({},t),{},{cart:t.cart.filter((function(t){return t.id!==e.payload.id}))});default:return t}},G={modal:{isOpen:!1,header:null},isLoading:!0,cards:h("cards")||[]},H=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case f.SET_CARDS:return Object(W.a)(Object(W.a)({},t),{},{cards:t.cards.concat(e.payload)});case f.SET_LOADER:return Object(W.a)(Object(W.a)({},t),{},{isLoading:e.payload});case f.SET_MODAL:return Object(W.a)(Object(W.a)({},t),{},{modal:e.payload});default:return t}},K=Object(B.combineReducers)({app:H,cart:z,favorite:Z}),Q=Object(B.createStore)(K,Object(Y.composeWithDevTools)(Object(B.applyMiddleware)(U.a)));i.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(s.a,{children:Object(l.jsx)(O.a,{store:Q,children:Object(l.jsx)(P,{})})})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.7df389ac.chunk.js.map